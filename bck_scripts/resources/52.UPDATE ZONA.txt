UPDATE TRAMOS T2
SET "ZONA" = TC."ZONA"
FROM
((
select A."ZONA", T."IdElemento" 
FROM TRAMOS T LEFT JOIN APOYOS_MUN A ON T."INFR_I" = A."NOMBRE"
)) AS TC
WHERE TC."IdElemento" = T2."IdElemento";

UPDATE TRAMOS T2
SET "ZONA" = TC."ZONA"
FROM
((
select A."ZONA", T."IdElemento" 
FROM TRAMOS T LEFT JOIN APOYOS_MUN A ON T."NEW_INFR_I" = A."NOMBRE"
)) AS TC
WHERE TC."IdElemento" = T2."IdElemento";

UPDATE TRAMOS T2
SET "ZONA" = TC."ZONA"
FROM
((
select A."ZONA", T."IdElemento" 
FROM TRAMOS T LEFT JOIN APOYOS_MUN A ON T."INFR_F" = A."NOMBRE"
WHERE T."ZONA" IS NULL
)) AS TC
WHERE TC."IdElemento" = T2."IdElemento";

UPDATE TRAMOS T2
SET "ZONA" = TC."ZONA"
FROM
((
select A."ZONA", T."IdElemento" 
FROM TRAMOS T LEFT JOIN APOYOS_MUN A ON T."NEW_INFR_F" = A."NOMBRE"
WHERE T."ZONA" IS NULL
)) AS TC
WHERE TC."IdElemento" = T2."IdElemento";

UPDATE TRAMOS T
SET "ZONA" = TC2."ZONA"
FROM ((
SELECT "CTO_COD", MAX(SUMATORIA) MAX_SUMATORIA, "ZONA" 
FROM 
((
SELECT "CTO_COD", "ZONA",  SUM(CAST("Longitud" AS DECIMAL)) SUMATORIA 
FROM TRAMOS 
WHERE "CTO_COD" IS NOT NULL
GROUP BY "CTO_COD", "ZONA"
)) AS TC
WHERE "ZONA" IS NOT NULL
GROUP BY "CTO_COD", "ZONA" 
)) AS TC2 
WHERE T."ZONA" IS NULL AND TC2."CTO_COD" = T."CTO_COD"